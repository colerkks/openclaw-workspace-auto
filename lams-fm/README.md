# LAMS-FM - åŠŸèƒ½åŒ»å­¦æ…¢ç—…ç®¡ç†ç³»ç»Ÿ

> **System Status**: âœ… **ONLINE AND STABLE** (Production Ready)

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

LAMS-FM (Functional Medicine Chronic Disease Management Subsystem) æ˜¯ä¸€ä¸ªåŸºäºåŠŸèƒ½åŒ»å­¦çŸ©é˜µç†è®ºçš„æ…¢ç—…ç®¡ç†ç³»ç»Ÿï¼Œé€šè¿‡ä¸ƒå¤§æ ¸å¿ƒå¤±è¡¡è¯„ä¼°å’Œ 5R å¹²é¢„åè®®ï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„å¥åº·ç®¡ç†æ–¹æ¡ˆã€‚ç³»ç»Ÿç»“åˆäº† AI æ™ºèƒ½åˆ†æä¸ç‹¬ç‰¹çš„"ç”Ÿå‘½ç®—åŠ›"ç»æµæ¨¡å‹ï¼Œå°†å¥åº·è¡Œä¸ºé‡åŒ–ä¸ºå¯æŠ•èµ„çš„æ•°å­—èµ„äº§ã€‚

---

## ğŸ¯ æ ¸å¿ƒåˆ›æ–°

### 1. ç”Ÿå‘½ç®—åŠ›ç³»ç»Ÿ (Life Force Economics)

å°†å¥åº·è¡Œä¸ºé‡åŒ–ä¸ºå¯è®¡ç®—çš„æŠ•èµ„å›æŠ¥ï¼Œé€šè¿‡ç»æµæ¨¡å‹æ¿€åŠ±ç”¨æˆ·åšæŒå¥åº·ç”Ÿæ´»æ–¹å¼ã€‚

**æ ¸å¿ƒå…¬å¼**:
```math
Hashrate = Task Score Ã— Biofeedback Bonus Ã— Streak Bonus
```

*   **Task Score**: Î£(å®Œæˆä»»åŠ¡ Ã— éš¾åº¦(1-10) Ã— å¥åº·å½±å“(1-10) Ã— 10)
*   **Biofeedback Bonus** (ç”Ÿç‰©åé¦ˆå¥–åŠ±ï¼Œæœ€å¤š +50%):
    *   è¡€ç³–æ­£å¸¸ (70-99 mg/dL): **+10%**
    *   è‰¯å¥½ç¡çœ  (7-9 å°æ—¶): **+15%**
    *   ä½å‹åŠ› (1-3): **+10%**
    *   é«˜èƒ½é‡ (7-10): **+10%**
    *   å¥½æƒ…ç»ª (7-10): **+5%**
*   **Streak Bonus** (è¿ç»­å¤©æ•°å¥–åŠ±):
    *   4-7 å¤©: **1.2x**
    *   8-14 å¤©: **1.5x**
    *   15+ å¤©: **2.0x**

**è¡ç”ŸæŒ‡æ ‡**:
*   **EBIO (Earned Biological Investment)**: ç´¯ç§¯æ€§å¥åº·æŠ•èµ„æŒ‡æ ‡ï¼Œ`EBIO = Hashrate / 100`
*   **ROHI (Return on Health Investment)**: å¥åº·æŠ•èµ„å›æŠ¥ç‡ï¼Œ`ROHI = (Current Health Score - Initial Health Score) / Total EBIO Ã— 100`

**Hashrate ç­‰çº§ç³»ç»Ÿ**:
| ç­‰çº§ | Hashrate èŒƒå›´ | æè¿° |
|------|---------------|------|
| **Beginner** | 0-49 | èµ·æ­¥é˜¶æ®µ |
| **Intermediate** | 50-99 | å»ºç«‹ä¹ æƒ¯ |
| **Advanced** | 100-199 | æ˜¾è‘—æ”¹å–„ |
| **Expert** | 200-499 | å¥åº·ä¸“å®¶ |
| **Master** | 500+ | å¤§å¸ˆå¢ƒç•Œ |

### 2. ä¸ƒå¤§åŠŸèƒ½åŒ»å­¦ç»´åº¦ (The Matrix)

ç³»ç»Ÿè‡ªåŠ¨å°† 50+ ç§ç—‡çŠ¶æ˜ å°„åˆ°ä»¥ä¸‹ä¸ƒå¤§ç”Ÿç†å¤±è¡¡ç»´åº¦ï¼š

| ç»´åº¦ | è‹±æ–‡ | æè¿° |
|------|------|------|
| **åŒåŒ–** | Assimilation | æ¶ˆåŒ–ã€å¸æ”¶ã€è‚ é“å¾®ç”Ÿç‰© |
| **é˜²å¾¡ä¸ä¿®å¤** | Defense & Repair | å…ç–«ã€ç‚ç—‡ã€æ„ŸæŸ“ |
| **èƒ½é‡** | Energy | çº¿ç²’ä½“åŠŸèƒ½ã€æ°§åŒ–åº”æ¿€ |
| **ç”Ÿç‰©è½¬åŒ–ä¸æ’æ³„** | Biotransformation | æ¯’ç´ å¤„ç†ã€è‚è„è§£æ¯’ |
| **è¾“é€** | Transport | å¿ƒè¡€ç®¡ã€æ·‹å·´ç³»ç»Ÿ |
| **é€šè®¯** | Communication | å†…åˆ†æ³Œã€ç¥ç»é€’è´¨ |
| **ç»“æ„** | Structural | ç»†èƒè†œå®Œæ•´æ€§ã€éª¨éª¼è‚Œè‚‰ |

### 3. AI æ™ºèƒ½åˆ†æ (Dr. Kyle)

*   **RAG æ¶æ„**: å®æ—¶æ³¨å…¥ç”¨æˆ·æœ€æ–°çš„çŸ©é˜µè¯„åˆ†ã€å®éªŒå®¤ç»“æœå’Œå¹²é¢„æ–¹æ¡ˆä½œä¸º AI ä¸Šä¸‹æ–‡ã€‚
*   **Dr. Kyle**: ä¸“æœ‰çš„ AI æç¤ºè¯å·¥ç¨‹ï¼Œæ¨¡æ‹ŸåŠŸèƒ½åŒ»å­¦ä¸“å®¶çš„æ€ç»´é€»è¾‘ã€‚
*   **åŠŸèƒ½**: æä¾›ä¸ªæ€§åŒ–é¥®é£Ÿå»ºè®®ã€è§£é‡Šå®éªŒå®¤æŒ‡æ ‡ã€è°ƒæ•´ 5R å¹²é¢„æ–¹æ¡ˆã€‚

---

## ğŸš€ ç³»ç»Ÿæ¶æ„

```mermaid
graph TD
    User[ç”¨æˆ·] --> Frontend[å‰ç«¯ (Next.js App Router)]
    Frontend --> Auth[Clerk èº«ä»½éªŒè¯]
    Frontend --> API[åç«¯ API / Server Actions]
    
    subgraph Core Logic [æ ¸å¿ƒé€»è¾‘å±‚]
        MatrixEngine[çŸ©é˜µè¯„åˆ†å¼•æ“]
        EcoEngine[ç”Ÿå‘½ç®—åŠ›å¼•æ“]
        DrKyle[Dr. Kyle AI (RAG)]
        CronJob[æ¯æ—¥ä»»åŠ¡ç”Ÿæˆå™¨]
    end
    
    API --> MatrixEngine
    API --> EcoEngine
    API --> DrKyle
    
    CronJob --> DB[(PlanetScale / MySQL)]
    MatrixEngine --> DB
    EcoEngine --> DB
    
    subgraph Data Layer [æ•°æ®å±‚]
        Users[ç”¨æˆ·è¡¨]
        Profiles[åŠŸèƒ½åŒ»å­¦æ¡£æ¡ˆ]
        Scores[çŸ©é˜µè¯„åˆ†]
        Interventions[5R å¹²é¢„æ–¹æ¡ˆ]
        Tracking[æ¯æ—¥è¿½è¸ª]
    end
    
    DB --- Data Layer
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| **æ¡†æ¶** | **Next.js 15** (App Router) | æ ¸å¿ƒåº”ç”¨æ¡†æ¶ |
| **è¯­è¨€** | **TypeScript** | ä¸¥æ ¼ç±»å‹å®‰å…¨ |
| **èº«ä»½éªŒè¯** | **Clerk** | ç”¨æˆ·ç®¡ç†ä¸è·¯ç”±ä¿æŠ¤ |
| **æ•°æ®åº“** | **MySQL / PlanetScale** | Serverless æ•°æ®åº“ |
| **ORM** | **Drizzle ORM** | ç±»å‹å®‰å…¨çš„ SQL æ„å»ºå™¨ |
| **æ ·å¼** | **Tailwind CSS** | å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶ |
| **å¯è§†åŒ–** | **Recharts** | é›·è¾¾å›¾ä¸æ•°æ®å›¾è¡¨ |
| **è‡ªåŠ¨åŒ–** | **Vercel Cron Jobs** | æ¯æ—¥ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆ |
| **éªŒè¯** | **Zod** | Schema å£°æ˜ä¸éªŒè¯ |

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
lams-fm/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/                # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/           # AI èŠå¤©æ¥å£ (Dr. Kyle)
â”‚   â”‚   â”‚   â””â”€â”€ cron/           # å®šæ—¶ä»»åŠ¡
â”‚   â”‚   â”‚       â””â”€â”€ daily-reset/# æ¯æ—¥ä»»åŠ¡é‡ç½® (Vercel Cron)
â”‚   â”‚   â”œâ”€â”€ assessment/         # è¯„ä¼°é—®å·é¡µé¢
â”‚   â”‚   â”œâ”€â”€ dashboard/          # ä»ªè¡¨ç›˜ (çŸ©é˜µå›¾ + ç®—åŠ›æ˜¾ç¤º)
â”‚   â”‚   â”œâ”€â”€ daily-tracking/     # æ¯æ—¥è¿½è¸ªé¡µé¢
â”‚   â”‚   â”œâ”€â”€ interventions/      # å¹²é¢„æ–¹æ¡ˆé¡µé¢
â”‚   â”‚   â”œâ”€â”€ sign-in/            # ç™»å½•é¡µ
â”‚   â”‚   â””â”€â”€ sign-up/            # æ³¨å†Œé¡µ
â”‚   â”‚
â”‚   â”œâ”€â”€ components/             # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ matrix-radar.tsx    # çŸ©é˜µé›·è¾¾å›¾
â”‚   â”‚   â”œâ”€â”€ hashrate-display.tsx# ç”Ÿå‘½ç®—åŠ›ä»ªè¡¨ç›˜
â”‚   â”‚   â”œâ”€â”€ ai-chat.tsx         # AI èŠå¤©ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                    # æ ¸å¿ƒé€»è¾‘åº“
â”‚   â”‚   â”œâ”€â”€ db.ts               # æ•°æ®åº“è¿æ¥ (Mock/Real åˆ‡æ¢)
â”‚   â”‚   â”œâ”€â”€ schema.ts           # Drizzle Schema (9ä¸ªè¡¨)
â”‚   â”‚   â”œâ”€â”€ matrix-engine.ts    # çŸ©é˜µè¯„åˆ†ç®—æ³•
â”‚   â”‚   â”œâ”€â”€ economics.ts        # ç”Ÿå‘½ç®—åŠ›ç®—æ³•å¼•æ“
â”‚   â”‚   â”œâ”€â”€ dr-kyle.ts          # AI æç¤ºè¯ä¸ä¸Šä¸‹æ–‡æ„å»º
â”‚   â”‚   â”œâ”€â”€ mock-db.ts          # æœ¬åœ°å¼€å‘ç”¨ Mock æ•°æ®åº“
â”‚   â”‚   â””â”€â”€ seed.ts             # æµ‹è¯•æ•°æ®ç”Ÿæˆè„šæœ¬
â”‚   â”‚
â”‚   â””â”€â”€ actions/                # Server Actions (è¡¨å•å¤„ç†)
â”‚
â”œâ”€â”€ vercel.json                 # Vercel éƒ¨ç½²é…ç½® (Cron Jobs)
â”œâ”€â”€ drizzle.config.ts           # Drizzle é…ç½®
â”œâ”€â”€ next.config.js              # Next.js é…ç½®
â””â”€â”€ middleware.ts               # Clerk è·¯ç”±ä¿æŠ¤ä¸­é—´ä»¶
```

---

## ğŸ§ª æµ‹è¯•ä¸éªŒè¯

é¡¹ç›®åŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•å’Œç³»ç»ŸéªŒè¯è„šæœ¬ã€‚

### 1. çŸ©é˜µå¼•æ“å•å…ƒæµ‹è¯• (8/8 é€šè¿‡)
*   âœ… ç©ºé—®å·åŸºå‡†åˆ†æµ‹è¯• (70åˆ†)
*   âœ… å•ä¸€ç—‡çŠ¶ç»´åº¦å½±å“æµ‹è¯•
*   âœ… å¤šç—‡çŠ¶ç´¯ç§¯æ•ˆåº”æµ‹è¯•
*   âœ… å®éªŒå®¤ç»“æœä¿®æ­£æµ‹è¯•
*   âœ… ç»¼åˆå¤šç»´åº¦æ¡ˆä¾‹æµ‹è¯•
*   âœ… æ­£å¸¸å®éªŒå®¤æŒ‡æ ‡æ— å½±å“æµ‹è¯•
*   âœ… è¯„åˆ†è¾¹ç•Œå¼ºåˆ¶ (0-100) æµ‹è¯•

### 2. ç³»ç»Ÿå®Œæ•´æ€§éªŒè¯
*   âœ… å…³é”®æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥ (25+ æ–‡ä»¶)
*   âœ… ä¾èµ–é…ç½®æ£€æŸ¥
*   âœ… TypeScript é…ç½®æ£€æŸ¥

è¿è¡Œæµ‹è¯•ï¼š
```bash
npx tsx src/lib/matrix-engine.test.ts  # è¿è¡Œå•å…ƒæµ‹è¯•
npm run verify                         # è¿è¡Œç³»ç»ŸéªŒè¯
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ä¸éƒ¨ç½²

### 1. æœ¬åœ°å¼€å‘

**å®‰è£…ä¾èµ–**:
```bash
git clone https://github.com/colerkks/openclaw-workspace-auto.git
cd lams-fm
npm install
```

**é…ç½®ç¯å¢ƒå˜é‡** (`.env`):
```env
# Clerk Auth (https://dashboard.clerk.com/)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...

# Database (PlanetScale / MySQL)
# æœ¬åœ°å¼€å‘è‹¥æ— æ•°æ®åº“ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨ Mock DB
DATABASE_URL="mysql://user:password@host/database"

# Cron Secret (å¯é€‰)
CRON_SECRET=your-secret
```

**åˆå§‹åŒ–æ•°æ®åº“** (ä»…å½“ä½¿ç”¨çœŸå® DB æ—¶):
```bash
npm run db:generate  # ç”Ÿæˆè¿ç§»
npm run db:push      # æ¨é€ Schema
npm run db:seed      # å¡«å……æµ‹è¯•æ•°æ®
```

**å¯åŠ¨æœåŠ¡**:
```bash
npm run dev
```
è®¿é—® http://localhost:3000

### 2. Vercel éƒ¨ç½² (æ¨è)

1.  å°†ä»“åº“è¿æ¥åˆ° Vercelã€‚
2.  åœ¨ Vercel è®¾ç½®ä¸­é…ç½®ä¸Šè¿°ç¯å¢ƒå˜é‡ã€‚
3.  **Cron Job é…ç½®**: 
    *   Vercel ä¼šè‡ªåŠ¨è¯»å– `vercel.json`ã€‚
    *   æ¯æ—¥ä»»åŠ¡é‡ç½®ä½œä¸šå°†äº **00:00 UTC** è‡ªåŠ¨è¿è¡Œï¼Œè°ƒç”¨ `/api/cron/daily-reset`ã€‚

---

## ğŸ“ˆ å¼€å‘å†ç¨‹ (Phase 1-5)

*   **Phase 1: æ•°æ®åŸºç¡€** âœ…
    *   è®¾è®¡å¹¶å®ç°äº†åŒ…å« 9 ä¸ªæ ¸å¿ƒè¡¨çš„æ•°æ®åº“ Schemaã€‚
    *   é›†æˆ Drizzle ORM å’Œ PlanetScaleã€‚
*   **Phase 2: æ ¸å¿ƒç®—æ³•** âœ…
    *   å¼€å‘çŸ©é˜µè¯„åˆ†å¼•æ“ï¼Œå®ç°ç—‡çŠ¶åˆ°ç»´åº¦çš„æ˜ å°„ç®—æ³•ã€‚
    *   å®Œæˆæ‰€æœ‰æ ¸å¿ƒé€»è¾‘çš„å•å…ƒæµ‹è¯•ã€‚
*   **Phase 3: å‰ç«¯å®ç°** âœ…
    *   æ„å»ºä»ªè¡¨ç›˜ã€è¯„ä¼°é—®å·å’Œé›·è¾¾å›¾å¯è§†åŒ–ã€‚
    *   å®ç°å“åº”å¼è®¾è®¡å’Œäº¤äº’é€»è¾‘ã€‚
*   **Phase 4: ç³»ç»Ÿè”è°ƒä¸ AI** âœ…
    *   é›†æˆ Dr. Kyle AI åŠ©æ‰‹ã€‚
    *   å®ç° RAG æ¶æ„ï¼Œæ³¨å…¥å¥åº·æ•°æ®ä¸Šä¸‹æ–‡ã€‚
    *   ç¼–å†™ Seed è„šæœ¬ç”Ÿæˆå®Œæ•´æµ‹è¯•æ•°æ®ã€‚
*   **Phase 5: ç»æµæ¨¡å‹ä¸ç”Ÿäº§åŒ–** âœ…
    *   é›†æˆ Clerk èº«ä»½éªŒè¯ã€‚
    *   å®ç°ç”Ÿå‘½ç®—åŠ› (Life Force) ç»æµæ¨¡å‹ç®—æ³•ã€‚
    *   é…ç½® Vercel Cron Jobs å®ç°æ¯æ—¥ä»»åŠ¡è‡ªåŠ¨åŒ–ã€‚
    *   **æœ€ç»ˆçŠ¶æ€**: Production Readyã€‚

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| **æ€»ä»£ç è¡Œæ•°** | 4,800+ |
| **æ•°æ®åº“è¡¨** | 9 ä¸ª |
| **é¡µé¢è·¯ç”±** | 6 ä¸ª |
| **ç—‡çŠ¶æ˜ å°„** | 50+ æ¡ |
| **å•å…ƒæµ‹è¯•** | 8 ä¸ª (100% é€šè¿‡) |
| **Hashrate ç­‰çº§** | 5 çº§ |
| **å®Œæˆåº¦** | 100% |

---

## ğŸ“® è”ç³»ä¸è®¸å¯è¯

*   **ä½œè€…**: colerkks
*   **ä»“åº“**: [GitHub Link](https://github.com/colerkks/openclaw-workspace-auto)
*   **è®¸å¯è¯**: MIT

---
*Last Updated: 2026-02-06*
